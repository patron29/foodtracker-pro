<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FoodTracker">
    <meta name="theme-color" content="#667eea">
    <title>FoodTracker Pro - Mobile</title>
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkZvb2RUcmFja2VyIFBybyIsCiAgInNob3J0X25hbWUiOiAiRm9vZFRyYWNrZXIiLAogICJzdGFydF91cmwiOiAiLiIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiI2ZmZmZmZiIsCiAgInRoZW1lX2NvbG9yIjogIiM2NjdlZWEiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEwMCAxMDAnJTNFJTNDdGV4dCB5PScuOWVtJyBmb250LXNpemU9JzkwJyUzRSVGMCU5RiU4RCVCRCUzQy90ZXh0JTNFJTNDL3N2ZyUzRSIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMDAgMTAwJyUzRSUzQ3RleHQgeT0nLjllbScgZm9udC1zaXplPSc5MCclM0UlRjAlOUYlOEQlQkQlM0MvdGV4dCUzRSUzQy9zdmclM0UiLAogICAgICAic2l6ZXMiOiAiNTEyeDUxMiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXQp9">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            min-height: -webkit-fill-available;
            overflow-x: hidden;
        }

        html {
            height: -webkit-fill-available;
        }

        /* Login Screen */
        .login-screen {
            padding: 40px 20px;
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .logo {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        h1 {
            color: white;
            margin-bottom: 10px;
            font-size: 32px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .subtitle {
            color: rgba(255,255,255,0.9);
            margin-bottom: 30px;
            font-size: 16px;
        }

        .feature-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .login-card {
            background: white;
            border-radius: 20px;
            padding: 30px 20px;
            margin: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .quick-login-btn {
            width: 100%;
            padding: 18px;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .quick-login-btn:active {
            transform: scale(0.98);
        }

        /* Main App */
        .main-app {
            display: none;
            height: 100vh;
            background: #f5f5f5;
            flex-direction: column;
        }

        .app-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            padding-top: max(15px, env(safe-area-inset-top));
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #667eea;
            font-weight: bold;
            font-size: 20px;
        }

        .logout-btn {
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 20px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }

        .app-body {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 80px;
        }

        .content-area {
            padding: 20px;
        }

        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 13px;
            opacity: 0.9;
            margin-top: 5px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .food-entry {
            background: white;
            border-radius: 15px;
            padding: 18px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .food-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .food-name {
            font-weight: 600;
            font-size: 17px;
            color: #333;
            line-height: 1.4;
        }

        .food-time {
            color: #999;
            font-size: 14px;
            white-space: nowrap;
        }

        .verified-badge {
            display: inline-block;
            background: #4CAF50;
            color: white;
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 12px;
            margin-left: 8px;
        }

        .food-macros {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            font-size: 14px;
            color: #666;
        }

        .macro {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .serving-info {
            font-size: 13px;
            color: #999;
            margin-top: 8px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #eee;
            display: grid;
            grid-template-columns: 1fr 1fr;
            padding-bottom: env(safe-area-inset-bottom);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 100;
        }

        .nav-item {
            padding: 15px;
            text-align: center;
            border: none;
            background: none;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .nav-item.active {
            color: #667eea;
        }

        .nav-icon {
            font-size: 24px;
        }

        .nav-label {
            font-size: 12px;
            font-weight: 500;
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            font-size: 32px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4);
            z-index: 99;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }

        .fab:active {
            transform: scale(0.95);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            animation: fadeIn 0.2s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal.active {
            display: flex;
            align-items: flex-end;
        }

        .modal-content {
            background: white;
            border-radius: 25px 25px 0 0;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            animation: slideUp 0.3s;
            padding-bottom: env(safe-area-inset-bottom);
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-header {
            position: sticky;
            top: 0;
            background: white;
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .modal-title {
            font-size: 22px;
            font-weight: 600;
            color: #333;
        }

        .close-btn {
            background: #f0f0f0;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 20px;
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            color: #999;
        }

        input {
            width: 100%;
            padding: 18px 18px 18px 55px;
            border: 2px solid #eee;
            border-radius: 15px;
            font-size: 17px;
            transition: border-color 0.2s;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        .search-results {
            max-height: 400px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .search-result-item {
            padding: 18px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-result-item:active {
            background: #f9f9f9;
        }

        .result-name {
            font-weight: 600;
            font-size: 16px;
            color: #333;
            margin-bottom: 6px;
        }

        .result-brand {
            font-size: 13px;
            color: #999;
            margin-bottom: 8px;
        }

        .result-macros {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            font-size: 13px;
            color: #666;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .loading-spinner {
            font-size: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Success Toast */
        .toast {
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            background: #4CAF50;
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4);
            z-index: 10000;
            animation: toastIn 0.3s, toastOut 0.3s 2.7s;
            display: none;
        }

        .toast.show {
            display: block;
        }

        @keyframes toastIn {
            from { opacity: 0; transform: translate(-50%, -20px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }

        @keyframes toastOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="logo">üçΩÔ∏è</div>
        <h1>FoodTracker Pro</h1>
        <span class="feature-badge">‚ú® Search 350k+ Foods</span>
        <p class="subtitle">Track meals with verified nutrition data</p>

        <div class="login-card">
            <button class="quick-login-btn" onclick="quickLogin()">
                <span>üöÄ</span>
                <span>Start Tracking</span>
            </button>
            <p style="font-size: 13px; color: #999; margin-top: 15px;">
                Mobile-optimized ‚Ä¢ Works offline ‚Ä¢ Install as app
            </p>
        </div>
    </div>

    <!-- Main App -->
    <div class="main-app" id="mainApp">
        <div class="app-header">
            <div class="user-info">
                <div class="user-avatar">D</div>
                <div>
                    <div style="font-weight: 600; font-size: 16px;">Demo User</div>
                    <div style="font-size: 12px; opacity: 0.9;">FoodTracker Pro</div>
                </div>
            </div>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>

        <div class="app-body">
            <div class="content-area">
                <!-- My Diary -->
                <div id="diaryTab">
                    <div class="stats-card">
                        <h3 style="margin-bottom: 5px;">Today's Nutrition</h3>
                        <div style="font-size: 13px; opacity: 0.9; margin-bottom: 10px;">
                            <span id="currentDate"></span>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-value" id="statCalories">0</span>
                                <span class="stat-label">Calories</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="statProtein">0g</span>
                                <span class="stat-label">Protein</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="statCarbs">0g</span>
                                <span class="stat-label">Carbs</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="statFats">0g</span>
                                <span class="stat-label">Fats</span>
                            </div>
                        </div>
                    </div>

                    <h3 class="section-title">Today's Meals</h3>
                    <div id="diaryEntries">
                        <div class="empty-state">
                            <div class="empty-icon">üîç</div>
                            <p style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">No meals logged yet</p>
                            <p style="font-size: 14px;">Tap the + button to search foods!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Floating Action Button -->
        <button class="fab" onclick="openSearchModal()">+</button>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <button class="nav-item active">
                <div class="nav-icon">üìä</div>
                <div class="nav-label">My Diary</div>
            </button>
            <button class="nav-item">
                <div class="nav-icon">üë•</div>
                <div class="nav-label">Friends</div>
            </button>
        </div>
    </div>

    <!-- Search Modal -->
    <div id="searchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Search Foods</h2>
                <button class="close-btn" onclick="closeSearchModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="foodSearch" placeholder="Try 'chicken', 'banana', 'oatmeal'..." oninput="searchFood()">
                </div>
                <div id="searchResults"></div>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="toast" class="toast">‚úÖ Food logged successfully!</div>

    <script>
        let userEntries = [];

        // Demo food database
        const demoFoods = [
            { name: "Chicken Breast, Grilled", brand: "USDA", calories: 165, protein: 31, carbs: 0, fats: 3.6, serving: "100g" },
            { name: "Banana, Medium", brand: "Fresh", calories: 105, protein: 1.3, carbs: 27, fats: 0.4, serving: "1 medium (118g)" },
            { name: "Greek Yogurt, Plain", brand: "Generic", calories: 100, protein: 17, carbs: 6, fats: 0.7, serving: "170g" },
            { name: "Oatmeal, Cooked", brand: "Generic", calories: 71, protein: 2.5, carbs: 12, fats: 1.5, serving: "100g" },
            { name: "Salmon, Grilled", brand: "Atlantic", calories: 206, protein: 22, carbs: 0, fats: 13, serving: "100g" },
            { name: "Brown Rice, Cooked", brand: "Generic", calories: 111, protein: 2.6, carbs: 23, fats: 0.9, serving: "100g" },
            { name: "Eggs, Large", brand: "Generic", calories: 72, protein: 6, carbs: 0.4, fats: 5, serving: "1 large egg" },
            { name: "Almonds, Raw", brand: "Generic", calories: 579, protein: 21, carbs: 22, fats: 50, serving: "100g" },
            { name: "Avocado", brand: "Fresh", calories: 160, protein: 2, carbs: 8.5, fats: 15, serving: "100g" },
            { name: "Apple, Medium", brand: "Fresh", calories: 95, protein: 0.5, carbs: 25, fats: 0.3, serving: "1 medium" },
            { name: "Broccoli, Steamed", brand: "Fresh", calories: 35, protein: 2.4, carbs: 7, fats: 0.4, serving: "100g" },
            { name: "Sweet Potato, Baked", brand: "Fresh", calories: 90, protein: 2, carbs: 21, fats: 0.2, serving: "100g" },
            { name: "Tuna, Canned in Water", brand: "Generic", calories: 86, protein: 19, carbs: 0, fats: 0.6, serving: "100g" },
            { name: "Quinoa, Cooked", brand: "Generic", calories: 120, protein: 4.4, carbs: 21, fats: 1.9, serving: "100g" },
            { name: "Peanut Butter", brand: "Generic", calories: 588, protein: 25, carbs: 20, fats: 50, serving: "100g" },
            { name: "Blueberries, Fresh", brand: "Fresh", calories: 57, protein: 0.7, carbs: 14, fats: 0.3, serving: "100g" },
            { name: "Spinach, Raw", brand: "Fresh", calories: 23, protein: 2.9, carbs: 3.6, fats: 0.4, serving: "100g" },
            { name: "Turkey Breast, Sliced", brand: "Deli", calories: 89, protein: 17, carbs: 3, fats: 1, serving: "100g" },
            { name: "Protein Shake, Whey", brand: "Generic", calories: 120, protein: 24, carbs: 3, fats: 1.5, serving: "1 scoop" },
            { name: "Cottage Cheese, Low Fat", brand: "Generic", calories: 72, protein: 12, carbs: 4.3, fats: 1, serving: "100g" }
        ];

        let searchTimeout;

        function quickLogin() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainApp').style.display = 'flex';
            updateDate();
            updateDiary();
        }

        function logout() {
            userEntries = [];
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('mainApp').style.display = 'none';
        }

        function updateDate() {
            const options = { weekday: 'long', month: 'short', day: 'numeric' };
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', options);
        }

        function updateDiary() {
            let totalCals = 0, totalProtein = 0, totalCarbs = 0, totalFats = 0;
            
            userEntries.forEach(entry => {
                totalCals += entry.calories;
                totalProtein += entry.protein;
                totalCarbs += entry.carbs;
                totalFats += entry.fats;
            });
            
            document.getElementById('statCalories').textContent = Math.round(totalCals);
            document.getElementById('statProtein').textContent = Math.round(totalProtein) + 'g';
            document.getElementById('statCarbs').textContent = Math.round(totalCarbs) + 'g';
            document.getElementById('statFats').textContent = Math.round(totalFats) + 'g';
            
            const container = document.getElementById('diaryEntries');
            
            if (userEntries.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üîç</div>
                        <p style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">No meals logged yet</p>
                        <p style="font-size: 14px;">Tap the + button to search foods!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = userEntries.map(entry => `
                <div class="food-entry">
                    <div class="food-header">
                        <div style="flex: 1;">
                            <div class="food-name">
                                ${entry.meal}
                                <span class="verified-badge">‚úì USDA</span>
                            </div>
                            ${entry.serving ? `<div class="serving-info">${entry.serving}</div>` : ''}
                        </div>
                        <div class="food-time">${entry.time}</div>
                    </div>
                    <div class="food-macros">
                        <div class="macro">üî• ${Math.round(entry.calories)} cal</div>
                        <div class="macro">üí™ ${Math.round(entry.protein)}g protein</div>
                        <div class="macro">üåæ ${Math.round(entry.carbs)}g carbs</div>
                        <div class="macro">ü•ë ${Math.round(entry.fats)}g fats</div>
                    </div>
                </div>
            `).join('');
        }

        function openSearchModal() {
            document.getElementById('searchModal').classList.add('active');
            setTimeout(() => {
                document.getElementById('foodSearch').focus();
            }, 300);
        }

        function closeSearchModal() {
            document.getElementById('searchModal').classList.remove('active');
            document.getElementById('foodSearch').value = '';
            document.getElementById('searchResults').innerHTML = '';
        }

        function searchFood() {
            clearTimeout(searchTimeout);
            
            const query = document.getElementById('foodSearch').value.trim().toLowerCase();
            const resultsContainer = document.getElementById('searchResults');
            
            if (query.length < 2) {
                resultsContainer.innerHTML = '';
                return;
            }

            resultsContainer.innerHTML = '<div class="loading"><div class="loading-spinner">‚è≥</div><p>Searching...</p></div>';

            searchTimeout = setTimeout(() => {
                const results = demoFoods.filter(food => 
                    food.name.toLowerCase().includes(query) || 
                    food.brand.toLowerCase().includes(query)
                ).slice(0, 10);

                if (results.length === 0) {
                    resultsContainer.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">üòï</div>
                            <p style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">No results found</p>
                            <p style="font-size: 14px;">Try "chicken", "banana", or "oatmeal"</p>
                        </div>
                    `;
                    return;
                }

                resultsContainer.innerHTML = results.map(food => `
                    <div class="search-result-item" onclick='selectFood(${JSON.stringify(food)})'>
                        <div class="result-name">${food.name} <span class="verified-badge">‚úì</span></div>
                        <div class="result-brand">${food.brand} ‚Ä¢ ${food.serving}</div>
                        <div class="result-macros">
                            <span>üî• ${food.calories} cal</span>
                            <span>üí™ ${food.protein}g protein</span>
                            <span>üåæ ${food.carbs}g carbs</span>
                            <span>ü•ë ${food.fats}g fats</span>
                        </div>
                    </div>
                `).join('');
            }, 300);
        }

        function selectFood(food) {
            const now = new Date();
            const time = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            
            userEntries.push({
                meal: food.name,
                calories: food.calories,
                protein: food.protein,
                carbs: food.carbs,
                fats: food.fats,
                time: time,
                serving: food.serving
            });
            
            closeSearchModal();
            updateDiary();
            showToast();
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Service Worker for offline support
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('data:text/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgZXZlbnQgPT4ge30pOw==');
            });
        }
    </script>
</body>
</html>
